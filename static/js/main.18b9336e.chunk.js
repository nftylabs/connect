(this["webpackJsonpnfty-labs-login"]=this["webpackJsonpnfty-labs-login"]||[]).push([[0],{202:function(e,t){},258:function(e,t){},260:function(e,t){},291:function(e,t){},386:function(e,t,n){"use strict";n.r(t);var a=n(9),c=n.n(a),r=n(157),s=n.n(r),o=(n(89),n(2)),i=n.n(o),l=n(34),u=n(23),d=n.p+"static/media/logo.c0b0ed09.svg",f=n.p+"static/media/metamask-gray.3f479473.svg",b=n.p+"static/media/metamask-color.c1094eef.svg",x=n.p+"static/media/login-divider.50237155.svg",m=n.p+"static/media/wallet-connect-color.7aadbdc7.svg",j=n.p+"static/media/wallet-connect-gray.c2ea8007.svg",p=n(158),h=n.n(p),g=n(166),w=n(86),O=n.n(w),v=n(165),y=n.n(v),k=n(159),N=n.n(k),S=n(160),C=n.n(S),M=n(161),I=n.n(M),Y=n(29),E=n.p+"static/media/bummer-img.6fefb042.svg",L=n(6),T=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(u.a)(r,2),o=s[0],p=s[1],w=Object(a.useState)(!1),v=Object(u.a)(w,2),k=v[0],S=v[1],M=Object(a.useState)(""),T=Object(u.a)(M,2),U=(T[0],T[1]),D=Object(a.useState)(""),_=Object(u.a)(D,2),F=_[0],H=_[1],P=Object(a.useState)(!1),J=Object(u.a)(P,2),V=J[0],W=J[1],q=Object(a.useState)(null),z=Object(u.a)(q,2),A=z[0],B=z[1],R=Object(a.useState)(null),G=Object(u.a)(R,2),K=G[0],Q=G[1],X=Object(a.useState)(""),Z=Object(u.a)(X,2),$=Z[0],ee=Z[1];Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.location.href.split("/")[4],"#"===window.location.href.split("/")[3]&&t){e.next=5;break}return W(!0),e.abrupt("return");case 5:return n="https://api.connect.nftylabs.org/connect/".concat(t),console.log("endpoint",n),e.next=9,O.a.get(n).then((function(e){console.log("Response",e),U(e.data.payload);var n=e.data.payload;if(!n||403!==n.code&&404!==n.code){var a=JSON.stringify(n.ID).toUpperCase(),c=N.a.decToHex(a,{prefix:!1}).toUpperCase(),r="NFTY Labs signed message v0".concat(n.Version,"\n")+"You are authenticating to: ".concat(n.Service,"\n")+"Authorization ID: ".concat(c,"\n")+"Void after: ".concat(h.a.utc(n.Until).format("ddd MMM DD HH:mm:ss YYYY")," UTC\n");console.log(r),H(r),B(c),ee(n.Service),Q(t)}else W(!0)})).catch((function(e){console.error("Error occurred",e),W(!0)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var te=function(){var e=Object(l.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.connect.nftylabs.org/verify",e.next=3,O.a.post("https://api.connect.nftylabs.org/verify",{id:parseInt(A,16),serviceID:K,signature:t,address:n}).then((function(e){console.log("Verified, data is",e.data),e.data.link&&200===e.data.code?window.location.href=e.data.link:200!==e.data.code||e.data.link?200!==e.data.code?alert(e.data.message):200!==e.data.code||e.data.message||e.data.link||alert("You can close this window now"):alert("Login success: "+e.data.message)})).catch((function(e){console.error("Error",e),alert(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.enable();case 3:return e.next=5,new g.a.providers.Web3Provider(window.ethereum);case 5:return n=e.sent,e.next=8,n.listAccounts().then((function(e){return e[0]}));case 8:return t=e.sent,a=n.getSigner(),e.next=12,a.signMessage(F);case 12:return c=e.sent,S(!0),e.next=16,te(c,t);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),console.log("Metamask connect error"),alert("Unable to connect to metamask wallet. Please try again later");case 22:S(!1);case 23:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,a=[Object(Y.convertUtf8ToHex)(F),t],e.next=5,n.signPersonalMessage(a).then((function(e){return e})).catch((function(e){console.error(e),alert("Error occurred when signing message")}));case 5:return c=e.sent,console.log("signedMessage",c),e.next=9,te(c,t);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),alert("Issue when connecting to WalletConnect");case 15:S(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),ce=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new C.a({bridge:"https://bridge.walletconnect.org",qrcodeModal:I.a})).connected?(console.log("COnnector",t),n=t._accounts[0],ae(n,t)):(t.createSession(),console.log("connector is not connected")),t.on("connect",function(){var e=Object(l.a)(i.a.mark((function e(a,c){var r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}throw a;case 2:r=c.params[0],s=r.accounts,r.chainId,n=s[0],ae(n,t),console.log("connected");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),t.on("session_update",(function(e,a){if(e)throw e;var c=a.params[0],r=c.accounts;c.chainId;n=r[0],ae(n,t),console.log("session updated")})),t.on("disconnect",(function(e,t){if(alert("Creating a new session"),console.log("session disconnected"),e)throw e;localStorage.removeItem("walletconnect"),window.location.reload()}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return V?Object(L.jsx)("div",{className:"flex h-screen",children:Object(L.jsxs)("div",{className:"m-auto flex flex-col p-5",children:[Object(L.jsx)("p",{className:"label-text font-3xl font-bold text-black mb-4",children:"Oh No! It seems that the link you entered is invalid. Could you check again?"}),Object(L.jsxs)("p",{className:"label-text font-3xl font-bold text-black mb-10",children:["Contact ",Object(L.jsx)("a",{href:"https://www.nftylabs.org/support",children:"Support"})," if the issue continues"]}),Object(L.jsx)("img",{src:E})]})}):k?Object(L.jsxs)("div",{className:"flex h-screen flex-col",children:[Object(L.jsx)("div",{className:"m-auto",children:Object(L.jsx)(y.a,{loading:k,size:90})}),Object(L.jsx)("p",{className:"label-text font-sm text-black mt-8",children:"Taking too long? .... Please refresh the screen"})]}):Object(L.jsx)("div",{className:"flex justify-center items-center animate-fade-in-down",children:Object(L.jsxs)("div",{className:"flex shadow-2xl rounded-2xl flex-col md:h-1/2 md:w-5/12 md:mb-12 lg:h-1/2 lg:w-4/12 lg:mb-12 justify-center items-center",children:[Object(L.jsx)("img",{alt:"",className:"my-2 h-1mb-4",src:d}),Object(L.jsx)("div",{className:"my-4 md:w-full w-1/2 flex justify-center items-center font-black text-center border-1",children:Object(L.jsxs)("p",{className:"label-text text-black",children:["Login to ",$]})}),Object(L.jsxs)("div",{className:"flex items-center justify-center flex-col",children:[Object(L.jsx)("div",{className:"h-14 mb-12",children:Object(L.jsx)("img",{alt:"",className:n?"animate-fade-in-logo cursor-pointer":"cursor-pointer",onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},src:n?b:f,onClick:function(){return ne()}})}),Object(L.jsx)("div",{className:"my-8 border border-gray-500 cursor-pointer w-1/2 flex justify-center items-center",children:Object(L.jsx)("p",{className:"label-text text-gray-500 font-bold",onClick:function(){return ne()},children:"Metamask"})}),Object(L.jsx)("img",{alt:"",className:"mt-4 mb-8",src:x}),Object(L.jsx)("div",{className:"h-14 lg:mb-4 md:mb-4",children:Object(L.jsx)("img",{alt:"",className:o?"animate-fade-in-logo cursor-pointer":"cursor-pointer",onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)},src:o?m:j,onClick:function(){return ce()}})}),Object(L.jsx)("div",{className:"my-9 border border-gray-500 cursor-pointer w-1/2 flex justify-center items-center",children:Object(L.jsx)("p",{onClick:function(){return ce()},className:"label-text text-gray-500 font-bold",children:"WalletConnect"})})]})]})})};function U(e){e.fixed;var t=c.a.useState(!1),n=Object(u.a)(t,2),a=n[0],r=n[1];return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("nav",{id:"header",className:"relative flex flex-wrap items-center justify-between px-2 py-1 bg-pink mb-3",children:Object(L.jsxs)("div",{className:"container px-4 mx-auto flex flex-wrap items-center justify-between",children:[Object(L.jsxs)("div",{className:"w-full relative flex justify-between lg:w-auto lg:static lg:block lg:justify-start",children:[Object(L.jsx)("a",{target:"_blank",rel:"noreferrer",className:"text-sm font-bold leading-relaxed inline-block mr-4 py-2 whitespace-nowrap uppercase text-white",href:"https://www.nftylabs.org",children:Object(L.jsx)("img",{alt:"NFTY Labs Logo",className:"h-6",src:d})}),Object(L.jsx)("button",{className:"text-white cursor-pointer text-xl leading-none px-3 py-1 border border-solid border-white rounded bg-white block lg:hidden outline-none focus:outline-none",type:"button",onClick:function(){return r(!a)},children:Object(L.jsx)("p",{children:"-"})})]}),Object(L.jsx)("div",{className:"lg:flex flex-grow items-center"+(a?" flex":" hidden"),id:"example-navbar-danger",children:Object(L.jsxs)("ul",{className:"flex flex-col lg:flex-row list-none lg:ml-auto",children:[Object(L.jsx)("li",{className:"nav-item",children:Object(L.jsxs)("a",{target:"_blank",rel:"noreferrer",className:"px-3 py-2 flex items-center text-xs uppercase font-bold leading-snug text-white hover:opacity-75",href:"https://www.nftylabs.org/support",children:[Object(L.jsx)("i",{className:"fab fa-twitter text-lg leading-lg text-white opacity-75"}),Object(L.jsx)("span",{className:"ml-2",children:"Support"})]})}),Object(L.jsx)("li",{className:"nav-item",children:Object(L.jsxs)("a",{target:"_blank",rel:"noreferrer",className:"px-3 py-2 flex items-center text-xs uppercase font-bold leading-snug text-white hover:opacity-75",href:"http://blog.nftylabs.org",children:[Object(L.jsx)("i",{className:"fab fa-facebook-square text-lg leading-lg text-white opacity-75"}),Object(L.jsx)("span",{className:"ml-2",children:"Blog"})]})})]})})]})})})}var D=function(){return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(U,{}),Object(L.jsx)(T,{})]})};s.a.render(Object(L.jsx)(c.a.StrictMode,{children:Object(L.jsx)(D,{})}),document.getElementById("root"))},89:function(e,t,n){}},[[386,1,2]]]);
//# sourceMappingURL=main.18b9336e.chunk.js.map