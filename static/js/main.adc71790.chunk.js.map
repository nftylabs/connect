{"version":3,"sources":["assets/logo.svg","assets/metamask-gray.svg","assets/metamask-color.svg","assets/login-divider.svg","assets/wallet-connect-color.svg","assets/wallet-connect-gray.svg","pages/Login.js","App.js","reportWebVitals.js","index.js"],"names":["Login","useState","metamaskColor","setMetamaskColor","walletConnectColor","setWalletConnectColor","loading","setLoading","rawMessage","setRawMessage","message","setMessage","is404","setIs404","authID","setAuthID","serviceID","setServiceID","serviceName","setServiceName","useEffect","a","id","window","location","href","split","endpoint","axios","get","then","response","console","log","data","code","JSON","stringify","ID","toUpperCase","authIDHex","converter","decToHex","prefix","Version","Service","moment","utc","Until","format","catch","err","error","doFetch","connectMetamaskWalletAndSign","alert","ethereum","enable","ethers","providers","Web3Provider","provider","listAccounts","result","account","signer","getSigner","signMessage","signedMessage","post","parseInt","signature","address","link","className","size","alt","src","Logo","onMouseEnter","onMouseLeave","MetaMaskColor","MetaMaskGray","onClick","LoginDivider","WalletConnectColor","WalletConnectGray","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.adc71790.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c0b0ed09.svg\";","export default __webpack_public_path__ + \"static/media/metamask-gray.3f479473.svg\";","export default __webpack_public_path__ + \"static/media/metamask-color.c1094eef.svg\";","export default __webpack_public_path__ + \"static/media/login-divider.50237155.svg\";","export default __webpack_public_path__ + \"static/media/wallet-connect-color.7aadbdc7.svg\";","export default __webpack_public_path__ + \"static/media/wallet-connect-gray.c2ea8007.svg\";","import React, { useState, useEffect } from 'react' \nimport Logo from '../assets/logo.svg'\nimport MetaMaskGray from '../assets/metamask-gray.svg'\nimport { default as MetaMaskColor } from '../assets/metamask-color.svg'\nimport LoginDivider from '../assets/login-divider.svg'\nimport WalletConnectColor from '../assets/wallet-connect-color.svg'\nimport WalletConnectGray from '../assets/wallet-connect-gray.svg'\nimport moment from \"moment\"\nimport { ethers } from \"ethers\";\nimport axios from 'axios';\nimport ClimbingBoxLoader from \"react-spinners/ClipLoader\";\nimport converter from \"hex2dec\";\n\nconst Login = () => {\n\n    const[metamaskColor, setMetamaskColor] = useState(false);\n    const[walletConnectColor, setWalletConnectColor] = useState(false);\n    const[loading, setLoading] = useState(false);\n    const[rawMessage, setRawMessage] = useState(\"\");   \n    const[message, setMessage] = useState(\"\");\n    const[is404, setIs404] = useState(false)\n    const[authID, setAuthID] = useState(null)\n    const[serviceID, setServiceID] = useState(null)\n    const[serviceName, setServiceName] = useState('')\n\n    useEffect(() => {        \n        async function doFetch(){\n            let id = window.location.href.split(\"/\")[5]                        \n            let hash = window.location.href.split(\"/\")[4]               \n            if(hash !== \"#\" || !id){\n                setIs404(true)\n                return\n            }\n            let endpoint=`https://connect.api.nftylabs.argonx.com/connect/${id}`              \n            await axios.get(endpoint)\n                        .then((response) => {\n                            console.log(\"Response\", response)\n                            setRawMessage(response.data)\n                            let rawMessage = response.data       \n                            if(rawMessage){\n                                if(rawMessage.code === 403){\n                                    setIs404(true)\n                                    return\n                                }                                \n                            }                                    \n                            let authID = JSON.stringify(rawMessage.ID).toUpperCase()      \n                            let authIDHex = converter.decToHex(authID, { prefix: false }).toUpperCase()                                          \n                            let message = `NFTY Labs signed message v0${rawMessage.Version}\\n`+\n                                          `You are authenticating to: ${rawMessage.Service}\\n`+\n                                          `Authorization ID: ${authIDHex}\\n`+\n                                          `Void after: ${ moment.utc(rawMessage.Until).format(\"ddd MMM D HH:mm:ss YYYY\")} UTC\\n`\n                            console.log(message);\n                            setMessage(message);\n                            setAuthID(authIDHex);\n                            setServiceName(rawMessage.Service);\n                            setServiceID(id);\n                        })\n                        .catch(err => console.error(\"Error occurred\", err))\n        }\n        doFetch();\n    }, []);\n\n    const connectMetamaskWalletAndSign = async  () => {        \n       if(!rawMessage){\n           alert(\"Message is invalid. Please try again later\")\n           return\n       }\n       try{           \n            await window.ethereum.enable()\n            let account;\n            const provider = await new ethers.providers.Web3Provider(window.ethereum)            \n            account = await provider.listAccounts().then(result => {\n            let accountFound = result[0];\n            return accountFound\n            });\n            const signer = provider.getSigner()\n            const signedMessage = await signer.signMessage(message)\n            setLoading(true)\n            //verify the signature\n            const endpoint='https://connect.api.nftylabs.argonx.com/verify';\n            await axios.post(endpoint, {\n                id: parseInt(authID, 16),\n                serviceID: serviceID,\n                signature: signedMessage,\n                address: account\n            }).then((response) => {\n                console.log(\"Verified, data is\", response.data)\n                if(response.data.link){\n                    window.location.href = response.data.link\n                }\n                else{\n                    if (response.data.code === 403) {\n                      alert(\"Not authorized. Did you pick the wrong account?\");\n                    } else {\n                      alert(\"Service currently unavailable. Try again later.\");\n                    }\n                }                            \n            }).catch(err => {\n                console.error(\"Error\", err)\n                alert( \"Not authorized, did you pick the wrong account?\")\n            });            \n       }catch(e){\n            console.log(\"Metamask connect error\");\n            alert(\"Unable to connect to metamask wallet. Please try again later\")\n       }\n       setLoading(false)\n    }\n\n    if(is404){\n        return(\n            <div className=\"flex justify-center items-center my-24\">\n                <p>Not found</p>\n            </div>\n        )                \n    }\n\n\n    if(loading){\n        return(\n            <div className=\"flex justify-center items-center my-24\">\n                <ClimbingBoxLoader loading={loading} size={150} />\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"flex justify-center items-center animate-fade-in-down\">\n\n\n            <div className=\"flex shadow-2xl rounded-2xl flex-col md:h-1/2 md:w-4/12 md:my-12 md:mb-12  lg:h-1/2 lg:w-4/12 lg:my-12 lg:mb-12 justify-center items-center\">        \n                   \n                    <img alt=\"\" className=\"my-2 h-20 mb-4\" src={Logo}/> \n                                                                    \n                    <div className=\"my-4 w-1/2 flex justify-center items-center\">\n                            <p className=\"label-text text-black\">Login to {serviceName}</p>\n                    </div>  \n                    \n            \n                       <div className=\"flex items-center justify-center flex-col\">\n                            <div className=\"h-20 mb-12\">\n                                    <img alt=\"\" \n                                    className={metamaskColor? \"animate-fade-in-logo cursor-pointer\":\"cursor-pointer\"}\n\n                                    onMouseEnter={() => setMetamaskColor(true)}\n                                    onMouseLeave={() => setMetamaskColor(false)}\n                                    src={ metamaskColor ? MetaMaskColor : MetaMaskGray}\n                                    onClick={()=>connectMetamaskWalletAndSign()}\n                                    />\n                             </div>\n                                \n                                \n                             <div className=\"my-8 border border-gray-500 cursor-pointer w-1/2 flex justify-center items-center\">\n                                <p className=\"label-text text-gray-500 font-bold\"\n                                onClick={()=>connectMetamaskWalletAndSign()}>Metamask</p>\n                            </div>                                      \n                            \n                                                            \n                            <img alt=\"\" className=\"mt-4 mb-8\"  src={LoginDivider} />\n                            \n                            <div className=\"h-20 lg:mb-4\">\n                                <img alt=\"\" \n                                className=\"cursor-pointer\"\n                                onMouseEnter={() => setWalletConnectColor(true)}\n                                onMouseLeave={() => setWalletConnectColor(false)}\n                                src={ walletConnectColor ? WalletConnectColor : WalletConnectGray}\n                                />\n                            </div>\n                            \n                            <div className=\"my-9 border border-gray-500 cursor-pointer w-1/2 flex justify-center items-center\">\n                                <p className=\"label-text text-gray-500 font-bold\">WalletConnect</p>\n                            </div>               \n                       </div>\n               \n            </div>\n\n        </div>\n    );\n}\n\nexport default Login;\n","import React from \"react\";\nimport './index.css';\nimport Login from './pages/Login';\n\n\nfunction App() {\n    return (\n        <Login/>\n    );\n}\n\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log);\n"],"sourceRoot":""}